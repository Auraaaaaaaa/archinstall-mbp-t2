# This is an example PKGBUILD file. Use this as a start to creating your own,
# and remove these comments. For more information, see 'man PKGBUILD'.
# NOTE: Please fill out the license field for your package! If it is unknown,
# then please put 'unknown'.

# Maintainer: Your Name <youremail@domain.com>
pkgname=t2-mbpfan
pkgver=r37.2135bdf
pkgrel=1
pkgdesc="A simple daemon to control fan speed on t2 Macs with patchched kernel."
arch=('x86_64')
url="https://github.com/networkException/mbpfan"
license=('GPL3')
makedepends=()
provides=('mbpfan')
conflicts=('mbpfan')
source=("t2-mbpfan::git+https://github.com/networkException/mbpfan.git")
md5sums=('SKIP')

pkgver() {
	cd "$_pkgbase"
	( set -o pipefail
	  git describe --long 2>/dev/null | sed 's/\([^-]*-g\)/r\1/;s/-/./g' ||
	  printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
	)
}

build() {
	cd "$pkgname"
	make
}

#check() {
#	cd "$pkgname"
#	make -k check
#}

package() {
	cd "$pkgname"
	make DESTDIR="$pkgdir/" install
}
